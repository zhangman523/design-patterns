# 组合模式

> 亦称：对象树、Object Tree、Composite

### 目的

组合模式是哟中结构型设计模式，你可以使用它将对象组合成树状结构，并且能使用独立对象一样使用它们。

### 组合模式适合应用场景

- 如果你需要实现树状对象结构，可以使用组合模式。

- 组合模式为你提供了两种共享公共接口的基本元素类型：简单叶节点和复杂容器。 容器中可以包含叶节点和其他容器。 这使得你可以构建树状嵌套递归对象结构。

- 如果你希望客户端代码以相同方式处理简单和复杂元素， 可以使用该模式。

- 组合模式中定义的所有元素共用同一个接口。 在这一接口的帮助下， 客户端不必在意其所使用的对象的具体类。

### 实现方式

- 确保应用的核心模型能够以树状结构表示。 尝试将其分解为简单元素和容器。 记住， 容器必须能够同时包含简单元素和其他容器。

- 声明组件接口及其一系列方法， 这些方法对简单和复杂元素都有意义。
  
- 创建一个叶节点类表示简单元素。 程序中可以有多个不同的叶节点类。

- 创建一个容器类表示复杂元素。 在该类中， 创建一个数组成员变量来存储对于其子元素的引用。 该数组必须能够同时保存叶节点和容器， 因此请确保将其声明为组合接口类型。
  实现组件接口方法时， 记住容器应该将大部分工作交给其子元素来完成。
- 最后， 在容器中定义添加和删除子元素的方法。
  记住， 这些操作可在组件接口中声明。 这将会违反_接口隔离原则_， 因为叶节点类中的这些方法为空。 但是， 这可以让客户端无差别地访问所有元素， 即使是组成树状结构的元素。